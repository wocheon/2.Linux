
useradd

-D : default > /etc/default/useradd의 내용확인 또는 변경
*/etc/default/useradd의 내용설정
group 100 > 사용자를 새로 만드는 경우 사용자의 이름과 같은 그룹을 새로 만들어 신규사용자 혼자만 속하게됨
100이 기본값 
home=/home  
INACTIVE=-1 > 값이 음수일경우 설정x 패스워드의 사용기간이 지난뒤 계정로그인을 막는 유예기간
0은 유예기간 없음 3 : 유효기간지난후 3일 이내는 로그인가능
SKEL=/etc/skel> 사용자생성시에 제공되는 파일 및 디렉토리가 들어있는 디렉토리

-u : uid 커스텀생성
-g : gid 지정 (기존에 존재하는 그룹에 대해서만)
-G : 보조그룹 지정
-c : 코멘트 생성
-d : 홈디렉토리 커스텀 생성, 최종경로만 생성하므로 중간경로는 미리 생성필요
-m : /etc/login.defs  안의 CREATE_HOME 항목이 no로 되어있는 경우 홈디렉토리를 만들고 싶을 때 사용
(-d옵션과 같이 사용함) make의 의미
-s : 로그인쉘 지정 (/sbin/nologin 은 서버로의 로그인이 필요치않는 계정일 경우에 지정)

>-d 옵션과 -b옵션은 결과가 다르므로 주의 
ex) -d /home /user02로 설정 > /home/user02
-b /home/user02로 설정 > /home/user02/user02

>uid를 설정하지않고 유저를 추가하는경우 uid값은 이전사용자가 가진 값의 다음값이 된다

user를 추가한뒤 /etc/passwd에서 정보를 확인가능 ex) tail -2 /etc/passwd

#디폴트값의 홈디렉토리수정시에는 -b를 사용
-홈디렉토리를 지우고 다시생성하는 경우
cp -r /etc/skel 홈디렉토리 경로
chmod 700 홈디렉토리
chown 사용자 : 그룹 홈디렉토리

usermod 대부분 useradd의 옵션을 거의 다 사용가능
단 -m 옵션의 경우는 내용이 다름 
usermod -m : 홈디렉토리를 수정할 경우에 실제로 홈디렉토리에 대한변화를 주기위해서 사용 (-d옵션과 같이 사용 move의 의미)
-a :보조그룹을 추가할때 사용 (-G만 사용할 경우 추가가아닌 대체가 됨)
-L :계정 잠금
-U : 계정 잠금 해제

userdel : 유저 삭제 -r을 붙여야 홈디렉토리까지 전부 삭제함

chage : 암호속성을 확인 및 수정

groupadd -g 10 그룹명 > gid 값10인그룹 생성 이미 10의 gid를 가진 그룹이 있는경우 -og를 사용해서 추가가능
groupdel같은 gid 값을 가진 그룹이 있는경우 그룹 삭제시 오류가 생길수 있음  > gid값을 바꾸면 해결가능

그룹설정값확인 : /etc/group

setuid : 실행파일에 적용하면 root권한을 주지않아도 root의 권한으로 파일실행가능
ls -l 로 확인시 소유자 실행권한쪽에 s로 표기
ex) cat명령어에 setuid를 주면 다른 사용자가 해당명령어를 사용하여 루트의 내용확인가능

setgid : 디렉토리에 설정되어있으면 이 디렉토리에 새로 설정된파일들은 디렉토리의 그룹소유권보다
파일 생성자의 그룹소유권을 얻게됨
ls -l 로 확인시 그룹 실행권한쪽에 s로 표기

sticky bit : 해당 디렉토리에 생성한 파일의 삭제를 관리자와 파일소유주만 할수 있도록함
ls -l 로 확인시 기타 사용자 실행권한에 t로 표기

8진수 값
setuid : 4000
setgid : 2000
sticky bit : 1000

다른 값들과 같이 여러개를 동시에 설정이 가능함 ex) +7000 +6000 ...
대신 해제시에는 하나씩 풀어내야 해제가 가능


----------------------------------ACL-------------------------------------

chmod를 사용하면 하나의 사용자와 하나의 그룹만이 읽기쓰기실행권한을 가질수있음
acl 을 사용하면 여러 명의 사용자와 그룹도 권한을 가질수있다

acl mask : 모든 특정사용자나 그룹에 허용되는 최대 유효권한 사용

디렉토리단위로 default ACL을 지정가능 
> 해당 디렉토리의 하위에 있는 파일이나 디렉토리는 설정된 default ACL을 따르게된다
(해당디렉토리는 해당 x 하위 디렉토리부터 적용됨)

ls -l 에서 권한표기 맨뒤에 +로 표기됨

